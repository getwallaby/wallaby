<schema package="mrg.grid">

<!--
/*
 * Copyright 2008 Red Hat, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/
-->

   <class name="CondorConfigStore">
      <method name="GetGroup">
         <arg name="groupQuery" dir="I" type="map"
              desc="A map(queryType, value) that defines the group desired.
                    The queryType can be either 'ID' or 'Name'.
                    'ID' queryTypes will search for a group with the ID
                    defined in value.  'Name' queryTypes will search for a
                    group with the name defined in value."/>
         <arg name="groupObj" dir="O" type="objId"/>
      </method>

      <method name="AddStaticGroup">
         <arg name="groupName" dir="I" type="sstr"/>
         <arg name="definition" dir="I" type="map"
              desc="A map(hostname, True) that defines the members of the
                    group."/>
      </method>

      <method name="ModifyGroup">
         <arg name="groupID" dir="I" type="uint32"/>
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="nodes" dir="I" type="map"
              desc="A map(hostname, True) that defines the members of the
                    group."/>
         <arg name="options" dir="I" type="map"/>
      </method>

      <method name="RemoveGroup">
         <arg name="groupID" dir="I" type="uint32"/>
      </method>

      <method name="GetFeature">
         <arg name="featureName" dir="I" type="sstr"/>
         <arg name="featureObj" dir="O" type="objId"/>
      </method>

      <method name="AddFeature">
         <arg name="featureName" dir="I" type="sstr"/>
         <arg name="featureObj" dir="O" type="objId"/>
<!--
         <arg name="featureParams" dir="I" type="map"/>
         <arg name="includedFeatures" dir="I" type="map"
              desc="A map(featureId, priority) of other features included in
                    this feature"/>
         <arg name="featureConflicts" dir="I" type="map"
              desc="A map(featureId, priority) of other features this feature
                    conflicts with"/>
         <arg name="featureDepends" dir="I" type="map"
              desc="A map(featureId, priority) of other features this feature
                    depends on"/>
-->
      </method>

<!--
      <method name="ModifyFeature">
         <arg name="featureID" dir="I" type="uint32"/>
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="featureParams" dir="I" type="map"/>
         <arg name="includedFeatures" dir="I" type="map"/>
         <arg name="featureConflicts" dir="I" type="map"/>
         <arg name="featureDepends" dir="I" type="map"/>
         <arg name="options" dir="I" type="map"/>
      </method>
-->

      <method name="RemoveFeature">
         <arg name="featureID" dir="I" type="uint32"/>
      </method>

      <method name="GetConfiguration">
         <arg name="configQuery" dir="I" type="map"
              desc="A query that defines the configuration desired.  Valid
                    values for the key are 'ID' or 'Name'.  'ID' keys should
                    contain a specific ConfigurationId as its value,  whereas
                    'Name' keys should contain a Configuration Name as its
                    value"/>
         <arg name="configObj" dir="O" type="objId"/>
      </method>

<!--
      <method name="AddConfiguration">
         <arg name="configName" dir="I" type="sstr"/>
         <arg name="configFeatures" dir="I" type="map"/>
         <arg name="customParams" dir="I" type="map"/>
         <arg name="defaultFeatures" dir="I" type="map"/>
      </method>

      <method name="ModifyConfiguration">
         <arg name="configId" dir="I" type="uint32"/>
         <arg name="isDelete" dir="I" type="bool"/>
         <arg name="configName" dir="I" type="sstr"/>
         <arg name="groupId" dir="I" type="uint32"/>
         <arg name="featureIds" dir="I" type="map"/>
         <arg name="params" dir="I" type="map"/>
         <arg name="defaultFeatures" dir="I" type="map"/>
      </method>
-->

      <method name="SaveConfiguration">
         <arg name="configName" dir="I" type="sstr"
              desc="A name for this configuration.  A blank name will result
                    in the store creating a name"/>
         <arg name="configId" dir="O" type="uint32"/>
         <arg name="failureReason" dir="O" type="map"
              desc="A map containing a list of attributes for groups that must
                    be set for the configuration to be valid, as well as the
                    Id for the last valid configuration"/>
      </method>

      <method name="ChangeConfiguration">
         <arg name="configId" dir="I" type="uint32"/>
      </method>

      <method name="ActivateConfiguration">
         <arg name="failureReason" dir="O" type="map"
              desc="A map containing a list of attributes for groups that must
                    be set for the configuration to be valid, as well as the
                    Id for the last valid configuration"/>
<!--
         <arg name="configId" dir="I" type="uint32"/>
-->
      </method>

      <method name="GetNodeS">
         <arg name="nodeList" dir="O" type="map"
              desc="A map(hostname, timestamp) of the nodes configured in the
                    store and the last time they checked in with the store."/>
      </method>

      <method name="GetNodeConfig">
         <arg name="nodeName" dir="I" type="sstr"/>
         <arg name="nodeConfig" dir="O" type="map"
              desc="A map(parameter, value) representing the configuration for
                   the node supplied"/>
      </method>

      <method name="AddNode">
         <arg name="nodeName" dir="I" type="sstr"/>
         <arg name="nodePool" dir="I" type="sstr"/>
      </method>

      <method name="ModifyNode">
         <arg name="nodeName" dir="I" type="sstr"/>
         <arg name="nodePool" dir="I" type="sstr"/>
      </method>

      <method name="RemoveNode">
         <arg name="nodeName" dir="I" type="sstr"/>
      </method>

      <method name="GetParam">
         <arg name="paramName" dir="I" type="sstr"/>
         <arg name="paramObj" dir="O" type="objId"
              desc="A reference to the parameter object that matches the name
                    supplied"/>
      </method>

      <method name="AddParam">
         <arg name="paramName" dir="I" type="sstr"/>
         <arg name="paramObj" dir="O" type="objId"
              desc="A reference to the newly added parameter object"/>
      </method>

<!--
      <method name="ModifyParam">
         <arg name="paramName" dir="I" type="sstr"/>
         <arg name="paramType" dir="I" type="uint8"/>
         <arg name="paramValue" dir="I" type="lstr"/>
         <arg name="paramDefault" dir="I" type="lstr"/>
         <arg name="paramDesc" dir="I" type="lstr"/>
         <arg name="paramMustNotBeNull" dir="I" type="bool"/>
         <arg name="paramLevel" dir="I" type="uint8"/>
         <arg name="paramRequiresRestart" dir="I" type="bool"/>
         <arg name="paramDependsOn" dir="I" type="map"
              desc="A map(paramName, True) of other parameters that are needed
                    for the parameter to have intended affects"/>
         <arg name="paramConflictsWith" dir="I" type="map"
              desc="A map(paramName, True) of other parameters that interfere
                    or prevent proper usage of the parameter"/>
      </method>
-->

      <method name="RemoveParam">
         <arg name="paramName" dir="I" type="sstr"/>
      </method>
   </class>

<!--
   <class name="CondorConfigNode">
      <property name="nodeName" type="sstr" index="y"/>

      <method name="GetNodeName">
         <arg name="nodeName" dir="O" type="sstr"/>
      </method>

      <method name="SetNodeName">
         <arg name="nodeName" dir="I" type="sstr"/>
      </method>

      <method name="GetPool">
         <arg name="pool" dir="O" type="sstr"/>
      </method>

      <method name="SetPool">
         <arg name="pool" dir="I" type="sstr"/>
      </method>
   </class>
-->

   <class name="CondorConfig">
      <property name="configId" type="uint32" index="y"/>

      <method name="GetConfigId">
         <arg name="configId" dir="O" type="uint32"/>
      </method>

      <method name="GetConfigName">
         <arg name="configName" dir="O" type="sstr"/>
      </method>

<!--
      <method name="SetConfigName">
         <arg name="configName" dir="I" type="sstr"/>
      </method>
-->

      <method name="GetConfigVersion">
         <arg name="configVersion" dir="O" type="uint32"/>
      </method>

      <method name="IsConfigActive">
         <arg name="isActive" dir="O" type="bool"/>
      </method>

<!--
      <method name="SetConfigActive">
      </method>
-->

      <method name="GetFeatureList">
         <arg name="featureList" dir="O" type="map"
              desc="A map(featureId, priority) of features and their priority
                    for a configuration"/>
      </method>

<!--
      <method name="ModifyFeatureList">
         <arg name="isDelete" dir="I" type="bool"/>
         <arg name="featureList" dir="I" type="map"
              desc="map(groupId, featureList)"/>
      </method>
-->

      <method name="GetCustomParams">
         <arg name="customParams" dir="O" type="map"
              desc="A map(paramName, value) of parameter/value pairs for
                    a configuration"/>
      </method>

      <method name="ModifyCustomParams">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="customParams" dir="I" type="map"
              desc="map(groupId, map(param, value))"/>
      </method>

      <method name="GetDefaultFeatures">
         <arg name="defaultFeatures" dir="O" type="map"/>
      </method>

      <method name="ModifyDefaultFeatures">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="defaultFeatures" dir="I" type="map"/>
      </method>
   </class>

   <class name="CondorConfigFeature">
      <property name="featureID" type="uint32" index="y"/>

      <method name="GetFeatureID">
         <arg name="featureID" dir="O" type="sstr"/>
      </method>

      <method name="GetFeatureName">
         <arg name="featureName" dir="O" type="sstr"/>
      </method>

      <method name="SetFeatureName">
         <arg name="featureName" dir="I" type="sstr"/>
      </method>

      <method name="GetFeatureList">
         <arg name="featureList" dir="O" type="map"
              desc="A map(featureName, priority) of other features a feature
                    includes"/>
      </method>

      <method name="ModifyFeatureList">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="featureList" dir="I" type="map"
              desc="A map(featureName, priority) of other features a feature
                    includes"/>
      </method>

      <method name="GetParamList">
         <arg name="paramList" dir="O" type="map"
              desc="A map(paramName, value) of parameters and their
                    corresponding values that is specific to a group"/>
      </method>

      <method name="ModifyParamList">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="paramList" dir="I" type="map"
              desc="A map(paramName, value) of parameters and their
                    corresponding values that is specific to a group"/>
      </method>

      <method name="GetConflicts">
         <arg name="conflictList" dir="O" type="map"
              desc="A map(featureName, priority) of other features a feature
                    conflicts with for proper operation and the conflict
                    priorities"/>
      </method>

      <method name="ModifyConflicts">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="conflictList" dir="I" type="map"
              desc="A map(featureName, priority) of other features a feature
                    conflicts with and the priority level of the conflict"/>
      </method>

      <method name="GetDepends">
         <arg name="dependList" dir="O" type="map"
              desc="A map(featureName, priority) of other features a feature
                    depends on for proper operation and the dependency
                    priority"/>
      </method>

      <method name="ModifyDepends">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="dependList" dir="I" type="map"
              desc="A map(featureName, priority) of other features a feature
                    depends on and the priority level of the dependency"/>
      </method>

      <method name="GetSubsys">
         <arg name="subsysList" dir="O" type="map"
              desc="A map(subsysName, priority) to subsystems that collaborate
                    with the feature.  This is used to determine subsystems
                    that may need to be restarted if a configuration is
                    changed"/>
      </method>

      <method name="ModifySubsys">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="subsysList" dir="I" type="map"
              desc="A map(subsysName, priority) of subsystems that collaborate
                    with the feature.  This is used to determine subsystems
                    that may need to be restarted if a configuration is
                    changed"/>
      </method>
   </class>

   <class name="CondorConfigGroup">
      <property name="groupID" type="uint32" index="y"/>

      <method name="GetGroupID">
         <arg name="groupID" dir="O" type="uint32"/>
      </method>

      <method name="GetIncludedNodes">
         <arg name="nodeList" dir="O" type="map"
              desc="A map(hostname,priority) of the nodes associated with
                    this group"/>
      </method>

      <method name="GetGroupName">
         <arg name="groupName" dir="O" type="sstr"/>
      </method>

      <method name="SetGroupName">
         <arg name="groupName" dir="I" type="sstr"/>
      </method>

      <method name="GetFeatures">
         <arg name="groupFeatures" dir="O" type="map"
              desc="A map(featureName, priority) of features and their priority
                    included in the group"/>
      </method>

      <method name="AddFeatures">
         <arg name="groupFeatures" dir="I" type="map"
              desc="A map(featureName, priority) of features to add to the
                    group.  A priroty of 0 indicates indifference and 
                    the store should assign a priority"/>
         <arg name="paramsToSet" dir="O" type="map"
              desc="A map(paramName, reasonString) for parameters that need
                    to be set as a result of the features added before the
                    configuration will be considered valid"/>
      </method>

      <method name="RemoveFeatures">
         <arg name="groupFeatures" dir="I" type="map"
              desc="A map(featureName, priority) of features to remove from the
                    group"/>
      </method>

      <method name="GetParams">
         <arg name="customParams" dir="O" type="map"
              desc="A map(paramName, value) of parameters and their values that
                    are specific to the group"/>
      </method>

      <method name="AddParams">
         <arg name="customParams" dir="I" type="map"
              desc="A map(paramName, value) of parameters and their values to
                    add to the group"/>
      </method>

      <method name="RemoveParams">
         <arg name="customParams" dir="I" type="map"
              desc="A map(paramName, True) of parameters to remove from the
                    group"/>
      </method>

      <method name="GetConfig">
         <arg name="groupConfig" dir="O" type="map"
              desc="A map(paramName, value) of parameters and their values"/>
      </method>

      <method name="CheckConfigVersion">
         <arg name="configVersion" dir="I" type="uint32"/>
      </method>
   </class>

   <class name="CondorConfigParameter">
      <property name="name" type="sstr" index="y"/>

      <method name="GetName">
         <arg name="paramName" dir="O" type="sstr"/>
      </method>

      <method name="SetName">
         <arg name="paramName" dir="I" type="sstr"/>
      </method>

      <method name="GetParamType">
         <arg name="paramType" dir="O" type="uint8"/>
      </method>

      <method name="SetParamType">
         <arg name="paramType" dir="I" type="uint8"/>
      </method>

      <method name="GetValue">
         <arg name="paramValue" dir="O" type="lstr"/>
      </method>

      <method name="SetValue">
         <arg name="paramValue" dir="I" type="lstr"/>
      </method>

      <method name="GetDefault">
         <arg name="paramDefault" dir="O" type="lstr"/>
      </method>

      <method name="SetDefault">
         <arg name="paramDefault" dir="I" type="lstr"/>
      </method>

      <method name="GetDescription">
         <arg name="paramDesc" dir="O" type="lstr"/>
      </method>

      <method name="SetDescription">
         <arg name="paramDesc" dir="I" type="lstr"/>
      </method>

      <method name="GetDefaultMustChange">
         <arg name="paramMustChange" dir="O" type="bool"/>
      </method>

      <method name="SetDefaultMustChange">
         <arg name="paramMustChange" dir="I" type="bool"/>
      </method>

      <method name="GetVisibilityLevel">
         <arg name="paramLevel" dir="O" type="uint8"/>
      </method>

      <method name="SetVisibilityLevel">
         <arg name="paramLevel" dir="I" type="uint8"/>
      </method>

      <method name="GetRequiresRestart">
         <arg name="paramNeedsRestart" dir="O" type="bool"/>
      </method>

      <method name="SetRequiresRestart">
         <arg name="paramNeedsRestart" dir="I" type="bool"/>
      </method>

      <method name="GetDepends">
         <arg name="paramDepends" dir="O" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    dependency priority"/>
      </method>

      <method name="ModifyDepends">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="paramDepends" dir="I" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    dependency priority"/>
      </method>

      <method name="GetConflicts">
         <arg name="paramConflicts" dir="O" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    conflict priority"/>
      </method>

      <method name="ModifyConflicts">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="paramConflicts" dir="I" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    conflict priority"/>
      </method>
   </class>

   <class name="CondorConfigSubsystem">
      <property name="name" type="sstr" index="y"/>

      <method name="GetName">
         <arg name="subsysName" dir="O" type="sstr"/>
      </method>

      <method name="GetAttrs">
         <arg name="subsysAttrs" dir="O" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    priority that the subsystem is interested in"/>
      </method>

      <method name="ModifyAttrs">
         <arg name="command" dir="I" type="sstr"
              desc="Valid commands are 'ADD', 'REMOVE', 'UNION', 'INTERSECT',
                   'DIFF', and 'REPLACE'."/>
         <arg name="attrList" dir="I" type="map"
              desc="A map(paramName, priority) of parameter names and their
                    corresponding priorities"/>
      </method>
   </class>

   <eventArguments>
      <arg name="AffectedNodes" type="lstr"/>
      <arg name="Restart" type="bool"/>
      <arg name="Targets" type="map"
           desc="A map(Application, Subsystem) of the applications or their
                    corresponding priorities"/>
      </method>
   </class>

   <eventArguments>
      <arg name="AffectedNodes" type="lstr"/>
      <arg name="Restart" type="bool"/>
      <arg name="Targets" type="map"
           desc="A map(Application, Subsystem) of the applications or their
                 subsystems that need to have the specified action performed"/>
   </eventArguments>

   <event name="CondorRestartEvent" sev="alert" args="AffectedNodes,Restart,Targ
ets"/>
</schema>